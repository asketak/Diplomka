na relaci adresy-outputy jsem pridal prvni radek: tx,address

smazal jsem bloky a adresy a neimportoval relace mezi nimy

/root/velke/neo4j-community-3.3.2/bin/neo4j-admin import  --nodes:Transaction transactions_header.csv,transactions.csv --nodes:Output outputs_header.csv,outputs.csv --nodes:Address addresses_header.csv,addresses.csv --relationships:OUTPUT rel_tx_output_header.csv,rel_tx_output.csv --relationships:INPUT rel_input_header.csv,rel_input.csv --relationships:USES rel_output_address_header.csv,rel_output_address.csv --ignore-missing-nodes=true


USING PERIODIC COMMIT 500
LOAD CSV WITH HEADERS FROM "file:/root/velke/blocks_500000_512700/rel_output_address.csv" as csvline
 merge(o:OUTPUT {txid_n : csvline.tx})
 on match set o.address = csvline.address
 on create set o.address = csvline.address


MATCH (start:Address {address: '1AEfmTfVsWMWhnw96FiF5jpzTy57wSQRjs'}),(end:Address {address: '3DXLG1GKr1arP6KCDgAS33Pn5ij4UiTJNA'})
return start,end;

  p = shortestpath((start)-[:INPUT|OUTPUT*]->(end))
  return p

WITH p
LIMIT 1
UNWIND nodes(p) as n
OPTIONAL MATCH (n)-[:USES]->(a)
RETURN n as node, a as address

CALL algo.pageRank('match (n) return id(n) as id','match (a)-[]-(b) return id(a) as source, id(b) as target', {graph:'cypher', concurrency:8, iterations:2, dampingFactor:0.85, write: true, writeProperty:'pagerank'});


opravdu zalezi na poradi
explain MATCH (start:Address {address: '18QfPX9eM9M2ijHe96sgTAHHbB5UFppP2H'})<-[:USES]-(o1:Output)
             -[:INPUT|OUTPUT*]->(o2:Output)-[:USES]->(end:Address {address: '1AEfmTfVsWMWhnw96FiF5jpzTy57wSQRjs'}),
  p = shortestpath((o1)-[:INPUT|OUTPUT*..5]->(o2))
  with p
  limit 1
  return p

  MATCH (start:Address{address: '34tu3tAVgyVawkFLkwbirMoQQKDPe3Q88z'}), (end:Address{address: '1AEfmTfVsWMWhnw96FiF5jpzTy57wSQRjs'})
CALL algo.shortestPath.stream(start, end, 'cost')
YIELD nodeId, cost
RETURN nodeId, cost LIMIT 20